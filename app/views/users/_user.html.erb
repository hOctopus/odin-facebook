<% unless current_user == user %>
  <%= link_to "#{user.email}", user, class: "btn btn-info btn-xs" %>
  <% if friender = current_user.find_accepted_request(user) %>
    <%= link_to "unfriend", friender, method: :delete,
        class: "btn btn-danger btn-xs",
        data: { confirm: "Are you sure you want to unfriend #{user.email}?" } %>
  <% elsif friender = current_user.request_sent(user) %>
    <%= link_to "cancel friend request", friender, method: :delete,
        class: "btn btn-warning btn-xs",
        data: { confirm: "Are you sure you want to cancel this friend request?" } %>
  <% elsif friender = current_user.request_received(user) %>
    <%= link_to "accept friend request",  friendship_path(friender,
                                          accepted: true),
        method: :patch, class: "btn btn-success btn-xs",
        data: { confirm: "Confirm accept friend request"} %>
    <%= link_to "deny friend request", friender, method: :delete,
        class: "btn btn-danger btn-xs",
        data: { confirm: "Confirm deny friend request" } %>
  <% end %>
<% end %>
